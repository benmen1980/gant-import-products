<?php/** * The plugin bootstrap file * * This file is read by WordPress to generate the plugin information in the * plugin admin area. This file also defines a function that starts the plugin. * * @link              https://code.tutsplus.com/tutorials/creating-custom-admin-pages-in-wordpress-1 * @since             1.0.0 * @package           Custom_Admin_Settings * * @wordpress-plugin * Plugin Name:       Gant import products from csv file * Plugin URI:         https://simplyct.co.il * Description:       Load products from csv to gant.co.il * Version:           2.1.1 * Author:            Roy BenMenachem * Author URI:        https://simplyct.co.il * License:           GPL-2.0+ * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt *//* * https://code.tutsplus.com/tutorials/creating-custom-admin-pages-in-wordpress-3--cms-27017 */// If this file is called directly, abort.if ( ! defined( 'WPINC' ) ) {    die;}// constdefine('PLUGIN_PATH',plugin_dir_url( __FILE__ ));// Include the dependencies needed to instantiate the plugin.foreach ( glob( plugin_dir_path( __FILE__ ) . 'admin/*.php' ) as $file ) {    include_once $file;}add_action( 'plugins_loaded', function(){    add_action( 'admin_menu', 'simply_custom_admin_settings2' );} ,999);/** * Ajax Callback */add_action( 'wp_ajax_my_ajax_action', 'my_ajax_action_callback' );function my_ajax_action_callback(){    // do stuff...    //$lines = file_get_contents('php://input');    $lines[0] = $_POST['data_chank'];   // $content =  mb_convert_encoding($content, 'UTF-8',mb_detect_encoding($content, 'UTF-8, ISO-8859-1', true));   //$lines = explode("\n", $content);    $res = load_csv($lines);    $res_josn = json_encode($res);    wp_die($res_josn);}/** * Starts the plugin. * * @since 1.0.0 */function simply_custom_admin_settings2() {    add_submenu_page(        'edit.php?post_type=product',        __( 'Gant import products' ),        __( 'Gant Import products' ),        'manage_woocommerce', // Required user capability        'gant-product',        'create_form',        20    );function create_form(){    include_once (plugin_dir_path( __FILE__ ) .'admin/views/upload-form.php');}}